import { UserService } from '../services/UserService.js';

export class UserController {
  static async signup(req, res) {
    try {
      const { username, nickname, email, password, age } = req.body;
      const result = await UserService.signup({ username, nickname, email, password, age });
      res.json(result);
    } catch (error) {
      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:', error);
      if (error.message === 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹' || error.message === 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹') {
        return res.status(400).json({ message: error.message });
      }
      res.status(500).json({ message: 'ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„', error: error.message });
    }
  }

  static async login(req, res) {
    try {
      const { username, password } = req.body;
      const result = await UserService.login({ username, password });
      res.json(result);
    } catch (error) {
      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
      if (error.message === 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©') {
        return res.status(401).json({ message: error.message });
      }
      res.status(500).json({ message: 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', error: error.message });
    }
  }

  static async getAllUsers(req, res) {
    try {
      const users = await UserService.getAllUsers();
      res.json(users);
    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);
      res.status(500).json({ error: 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†' });
    }
  }
} 